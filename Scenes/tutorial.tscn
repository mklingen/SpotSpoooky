[gd_scene load_steps=16 format=3 uid="uid://cq04x237pjga"]

[ext_resource type="PackedScene" uid="uid://dobjhwbg0l1od" path="res://Prefabs/player.tscn" id="1_8qq6n"]
[ext_resource type="Script" path="res://Scripts/Root.cs" id="1_q3slw"]
[ext_resource type="Script" path="res://Scripts/TutorialManager.cs" id="2_l63vq"]
[ext_resource type="PackedScene" uid="uid://fsiebmyspll5" path="res://Prefabs/npc.tscn" id="3_2rigp"]
[ext_resource type="PackedScene" uid="uid://d2i3k45kbyoic" path="res://Art/tree.glb" id="3_jahlv"]
[ext_resource type="PackedScene" uid="uid://dedp74nucavoo" path="res://Prefabs/Waldo.tscn" id="4_eqoha"]
[ext_resource type="PackedScene" uid="uid://cfckxjuq6ycla" path="res://UI/MainUI.tscn" id="5_6b2r4"]
[ext_resource type="Theme" uid="uid://cye7uu46jinkn" path="res://UI/spooky_theme.tres" id="7_wbxok"]
[ext_resource type="Script" path="res://Scripts/NPCManager.cs" id="9_svkvw"]
[ext_resource type="PackedScene" uid="uid://c347qiwy2sftn" path="res://Art/haunted_house.glb" id="9_wltle"]

[sub_resource type="PlaneMesh" id="PlaneMesh_j23wl"]
size = Vector2(100, 100)

[sub_resource type="BoxShape3D" id="BoxShape3D_jwmup"]
size = Vector3(100, 1, 100)

[sub_resource type="Environment" id="Environment_gxf1a"]
ambient_light_source = 2
ambient_light_color = Color(0.396078, 0.529412, 0.819608, 1)
ssao_enabled = true
sdfgi_y_scale = 2
glow_enabled = true
glow_levels/1 = 1.28
glow_levels/2 = 0.5
glow_levels/5 = 0.0
glow_normalized = true
glow_intensity = 0.77
glow_bloom = 0.01
glow_blend_mode = 0
glow_hdr_threshold = 1.78
fog_enabled = true
fog_light_color = Color(0.188235, 0.105882, 0.286275, 1)
fog_light_energy = 2.63
fog_density = 0.0045
volumetric_fog_density = 0.03
volumetric_fog_albedo = Color(0.505882, 0.2, 0.478431, 1)

[sub_resource type="Curve" id="Curve_krk4t"]
_data = [Vector2(0, 0), 0.0, 0.0472727, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Curve" id="Curve_ugksp"]
_data = [Vector2(0.0129151, 0.0105263), 0.0, 0.0, 0, 0, Vector2(0.0738007, 0.989474), 3.9498, 3.9498, 0, 0, Vector2(0.415129, 0.631579), -4.30806, -4.30806, 0, 0, Vector2(1, 0.0105263), 0.0, 0.0, 0, 0]
point_count = 4

[node name="Tutorial" type="Node3D"]
script = ExtResource("1_q3slw")
gameOverScene = "res://UI/main_menu.tscn"
mainMenuScene = "res://UI/main_menu.tscn"
isTutorial = true

[node name="TutorialManager" type="Node3D" parent="."]
script = ExtResource("2_l63vq")
tutorialCompleteScene = "res://UI/main_menu.tscn"

[node name="Background" type="MeshInstance3D" parent="TutorialManager"]
transform = Transform3D(100, 0, 0, 0, 100, 0, 0, 0, 100, 0, 0, 0)
layers = 2
mesh = SubResource("PlaneMesh_j23wl")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TutorialManager/Background"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
shape = SubResource("BoxShape3D_jwmup")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="TutorialManager"]
transform = Transform3D(0.717105, 8.54856e-08, 0.696965, -0.568066, 0.579381, 0.584482, -0.403808, -0.815057, 0.415477, 0, 74.9081, 0)
light_color = Color(0.756863, 0.835294, 0.894118, 1)
shadow_enabled = true

[node name="tree" parent="TutorialManager" instance=ExtResource("3_jahlv")]
transform = Transform3D(4, 0, 0, 0, 4, 0, 0, 0, 4, -8.86329, 0, 0)

[node name="tree2" parent="TutorialManager" instance=ExtResource("3_jahlv")]
transform = Transform3D(4, 0, 0, 0, 4, 0, 0, 0, 4, 18.4596, 0, 0)

[node name="Waldo" parent="TutorialManager" instance=ExtResource("4_eqoha")]
transform = Transform3D(-0.998183, 0, -0.0602472, 0, 1, 0, 0.0602472, 0, -0.998183, -0.34284, 0, -19.8333)
isTutorial = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="TutorialManager"]
environment = SubResource("Environment_gxf1a")

[node name="PlayerCamera" parent="TutorialManager" instance=ExtResource("1_8qq6n")]
transform = Transform3D(1, 0, 0, 0, 0.888024, 0.459797, 0, -0.459797, 0.888024, 0, 52.6638, 75.4171)
v_offset = 5.0
far = 250.0
zoomCurve = SubResource("Curve_krk4t")
zoomTime = 0.25
collisionRayMask = 1
shakeCurve = SubResource("Curve_ugksp")
shakeAmount = 5.0
shakeTime = 0.15

[node name="haunted_house" parent="TutorialManager" instance=ExtResource("9_wltle")]
transform = Transform3D(-3.12041, 0, 2.5026, 0, 4, 0, -2.5026, 0, -3.12041, 13.3924, 0, -9.47774)

[node name="NPCs" type="Node3D" parent="TutorialManager"]
script = ExtResource("9_svkvw")
maxNumNPCs = 1
minNumNPCs = 1
npcSpawnAABB = AABB(0, 0, 0, 10, 0, 10)
npcPrefab = ExtResource("3_2rigp")
buildingCollisionMask = 2

[node name="NPC" parent="TutorialManager/NPCs" instance=ExtResource("3_2rigp")]
transform = Transform3D(-0.922787, 0, 0.38531, 0, 1, 0, -0.38531, 0, -0.922787, 0, 0, 0)

[node name="SpotLight" type="SpotLight3D" parent="TutorialManager"]
transform = Transform3D(1, 0, 0, 0, 0.00434584, 0.999991, 0, -0.999991, 0.00434584, 0, 6.81479, 0.0722809)
light_color = Color(0.992157, 0.729412, 0, 1)
light_energy = 55.0
light_indirect_energy = 4.0
light_specular = 3.0
shadow_enabled = true
shadow_bias = 0.229
shadow_normal_bias = 3.735
shadow_transmittance_bias = -3.141
shadow_opacity = 0.48
shadow_blur = 2.07
spot_range = 7.90693
spot_angle = 23.4334

[node name="MainUI" parent="TutorialManager" instance=ExtResource("5_6b2r4")]

[node name="TutorialLabel" type="Label" parent="TutorialManager"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -175.0
offset_top = -71.0
offset_right = 175.0
grow_horizontal = 2
grow_vertical = 0
size_flags_stretch_ratio = 0.88
theme = ExtResource("7_wbxok")
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/shadow_offset_y = 2
theme_override_constants/outline_size = 4
theme_override_font_sizes/font_size = 25
text = "This is a Tutorial"
horizontal_alignment = 1
vertical_alignment = 1
